{% load static %}

<link rel="stylesheet" type="text/css" href="{% static 'riot/record.css' %}">

{% block content %}
<head>
<title>{{ champ.name }}: {{ champ.champ_name }}</title>

    <!-- Required meta tags -->
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

    <!-- Bootstrap CSS -->
    <link rel="stylesheet" href="https://stackpath.bootstrapcdn.com/bootstrap/4.5.0/css/bootstrap.min.css" integrity="sha384-9aIt2nRpC12Uk9gS9baDl411NQApFmC26EwAOH8WgZl5MYYxFfc+NcPb1dKGj7Sk" crossorigin="anonymous">

</head>


<body>

    <main>
    <h1>RIOT API</h1>

    <p><strong>{{ champ.name }}</strong> </p>    
    <p>Summoner ID: <strong>{{ champ.summonerId }}</strong></p>    
    <p>Account ID: <strong>{{ champ.accountId }}</strong></p>    
    <p>Champion name: <strong>{{ champ.champ_name }}</strong></p>
    <p>Champion id: <strong>{{ champ.championId }}</strong></p>
    <p>Champion level: <strong>{{ champ.championLevel }}</strong></p>
    <p>Champion points: <strong>{{ champ.championPoints }}</strong></p>
    <p>Last time: <strong>{{ champ.last_time }}</strong></p>

    </main>

    <div class="container" style="max-width:700px">
        <div class="game-history">
            <div class="row infinite-container">
                {% for game in champ_games %}
                <div class="col-md-12 infinite-item">
                        <a href="/{{champ.server}}/{{champ.name}}/{{champ.champ_name}}/info" style="font-size:18px;font-weight:bold;">{{ game.champion_name }}</a>
                        <div class="d-flex justify-content-between align-items-center">
                            <h2 class="text-muted">{{ game.kills }}/{{ game.deaths }}/{{ game.assist }}</h2>
                            <h2 class="text-muted">{{game.win}}</h2>
                            <h2 class="text-muted">{{game.gameMode}}</h2>
                            <h2 class="text-muted">{{game.game_duration}}</h2>
                            <h2 class="text-muted">{{game.time_diff}}</h2>
                            <a href="/{{champ.server}}/{{game.gameId}}/info">{{ game.gameId }}</a>
                            <br>
                            <br>
                            <br>
                    </div>
                </div>
                {% endfor %}
            </div>
            <div class="loading">
                <button class="btn btn-primary loading">
                    <span class="spinner-border spinner-border-sm"></span>
                    Please wait, loading more games...
                </button>
            </div>
            <div class="row">
                <div class="col-12">
                    {% if games.has_next %}
                    <a class="infinite-more-link" href="?page={{ games.next_page_number }}"></a>
                    {% endif %}
                    </span>
                </div>
            </div>
        </div>
    </div>
    
    
    <script src="{% static 'js/jquery.waypoints.min.js' %}"></script>
    <script src="/static/js/infinite.min.js"></script>
    <script>
        var infinite = new Waypoint.Infinite({
            element: $('.infinite-container')[0],
    
            offset: '50%',
    
            onBeforePageLoad: function () {
                $('.loading').show();
            },
            onAfterPageLoad: function () {
                $('.loading').hide();
            }
    
        });
    </script>
{% endblock %}