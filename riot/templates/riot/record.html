{% load static %}

<link rel="stylesheet" type="text/css" href="{% static 'riot/record.css' %}">

{% block content %}
<!doctype html>
<html lang="en">
<head>
    <!-- Required meta tags -->
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1">

    <!-- Bootstrap CSS -->
    <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.4.1/jquery.min.js"></script>
    <script src="{% static 'js/jquery.waypoints.min.js' %}"></script>
    <script src="{% static 'js/infinite.min.js' %}"></script>

    <title>{{ stats.name }}</title>
</head>

<main>
    <h1>RIOT API</h1>

    <p><strong>{{ stats.name }}</strong> </p>    
    <p>Tier: <strong>{{ stats.tier }} {{ stats.rank }}</strong></p>    
    <p>Winrate: <strong>W: {{ stats.wins }} / L: {{ stats.losses }} ({{stats.win_rate }}%)</strong></p>

</main>

<div class="container" style="max-width:700px">
    <div class="game-history">
        <div class="row infinite-container">
            {% for game in games %}
            <div class="col-md-12 infinite-item">
                    <a href="/{{stats.server}}/{{stats.name}}/{{game.champion_name}}/info" style="font-size:18px;font-weight:bold;">{{ game.champion_name }}</a>
                    <div class="d-flex justify-content-between align-items-center">
                        <h2 class="text-muted">{{ game.kills }}/{{ game.deaths }}/{{ game.assist }}</h2>
                        <h2 class="text-muted">{{game.win}}</h2>
                        <h2 class="text-muted">{{game.gameMode}}</h2>
                        <h2 class="text-muted">{{game.game_duration}}</h2>
                        <h2 class="text-muted">{{game.time_diff}}</h2>
                        <a href="/{{stats.server}}/{{game.gameId}}/info">{{ game.gameId }}</a>
                        <br>
                        <br>
                        <br>
                </div>
            </div>
            {% endfor %}
        </div>
        <div class="loading">
            <button class="btn btn-primary loading">
                <span class="spinner-border spinner-border-sm"></span>
                Please wait, loading more games...
            </button>
        </div>
        <div class="row">
            <div class="col-12">
                {% if games.has_next %}
                <a class="infinite-more-link" href="?page={{ games.next_page_number }}"></a>
                {% endif %}
                </span>
            </div>
        </div>
    </div>
</div>


<script src="{% static 'js/jquery.waypoints.min.js' %}"></script>
<script src="/static/js/infinite.min.js"></script>
<script>
    var infinite = new Waypoint.Infinite({
        element: $('.infinite-container')[0],

        offset: '50%',

        onBeforePageLoad: function () {
            $('.loading').show();
        },
        onAfterPageLoad: function () {
            $('.loading').hide();
        }

    });
</script>

{% endblock %}